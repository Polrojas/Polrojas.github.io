<!DOCTYPE html>
<html>
<title>Administración del sitio</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../style/style-site.css">

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Patua+One&display=swap" rel="stylesheet">
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
<script src="https://unpkg.com/vue-chartjs/dist/vue-chartjs.min.js"></script>
<script src="../js/bodymin-animation.min.js" type="text/javascript"></script>
<script src="../js/bodymovin.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<body>
    <div class="loader">
        <div
        class="logo-size bodymovin"
        data-icon="../json/ciencia.json"
        data-aplay="true"
        data-loop="false"
        style="width:100px"
        ></div>
    </div>

    <div id="menu">
        <header class="pantalla-completa" id="index"> 
            <nav class="navbar navbar-expand-lg navbar-dark menu-admin-style fixed-top">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
                </button>
                <a class="navbar-brand" href="index.html">
                        <img src="images/logo.svg" height="30" class="d-inline-block align-top" alt="">  
                </a>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <div v-for="opcion in opciones">
                            <li class="nav-item active">
                                <a class="nav-link" :href="opcion.link">{{opcion.etiqueta}}</a>
                            </li>
                        </div>
                            <li class="nav-item active">
                                <a class="nav-link" href="../index.html" @click="logOut()" >Salir</a>
                            </li>
                    </ul>
                </div>
            </nav>
        </header>

        <div id="restricted" v-if="!logged" id="notLogged">
            <div class="padding">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-6">
                            <img src="../images/site/stop.svg" style="width:80%" alt="STOP"/>
                        </div>
                        <div class="col-sm-6" style="align-self: center">
                            <h1 class="titulo">Acceso restringido a Administradores</h1>
                            <p>Para acceder este contenido necesitás <a class="link" href="../index.html">iniciar sesión</a></p>  
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
   
<div id="app" v-if="logged" >
    <section>
        <h1 class="titulo" style="margin-top:60px">Administración de Categorías</h1>

            <div class="container">
                <div class="row" style="justify-content: center">
                    <div v-for="categoria in categorias" :key="categoria.nombre">
                        <div class="card categoria" :style="[categoria.styleObject]">
                            <a class="estado-borrador" v-if="categoria.estado==='B'">borrador</a>
                            <a class="estado-publicado" v-if="categoria.estado==='P'">publicado</a>

                        <img :src="categoria.url_imagen" width="200px" alt="Arkidia" />
                            <div class="card-body">
                                <p class="texto-car-categoria">{{ categoria.nombre }}</p>
                                <a href="#" @click="alterCategory = categoria" 
                                data-toggle="modal"
                                data-target="#modificarCategoria"
                                style="color:white" >Modificar</a> 
                                <a href="#" @click="idCategoria = categoria.id" 
                                    data-toggle="modal"
                                    data-target="#eliminarCategoria" 
                                    style="color:white">Eliminar</a>
                            </div>
                        </div>

                    </div>
                    <div class="card categoria" data-target="#newCategory" data-toggle="modal" style="background-color: grey">
                            <img src="../images/arkidians/nuevo.svg" width="200px" alt="Arkidia" />
                            <div class="card-body">
                                <a class="texto-car-categoria">Nueva categoría</a>
                            </div>
                        </div>
                </div>
            </div>
    </section>



          <!-- Modal nueva categoria-->
        <div
          class="modal fade"
          id="newCategory"
          tabindex="-1"
          role="dialog"
          aria-labelledby="loginCenterTitle"
          aria-hidden="true"
        >
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-body" style="padding:0px">


                <form style="margin: 20px">
                    <h1>Nueva categoría</h1>
                        <h6 v-if="registerError" style="color: darkred">
                        {{registerMsg}}
                        </h6>
                    <div class="form-group">
                        <label>Nombre de la categoría</label>
                        <input type="text" class="form-control" v-model="newCategory.nombre"  placeholder="Ingresá el nombre de la categoría">
                    </div>
                    <div class="form-group">
                        <label>Imagen</label>
                        <input type="text" class="form-control" v-model="newCategory.imagen"  placeholder="Ingresá el path de la imagen">
                    </div>
                    <div class="form-group">
                        <label>Color</label>
                        <input type="text" class="form-control" v-model="newCategory.color"  placeholder="Ingresá el color en hexadecimal">
                    </div>
                    <div class="form-group">
                        <label>Link al video de la categoría</label>
                        <input type="text" class="form-control" v-model="newCategory.link_video"  placeholder="Ingresá el path del video de la categoría">
                    </div>
  
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-dismiss="modal"
                  >Cerrar
                  </button>
                  <button
                    type="button"
                    class="btn btn-primary"
                    @click="crearCategoria(newCategory)"
                  >Crear categoría
                  </button>
                </form>
  

              </div>
            </div>
          </div>
        </div>


          <!-- Modal modificar categoria-->
          <div
          class="modal fade"
          id="modificarCategoria"
          tabindex="-1"
          role="dialog"
          aria-labelledby="loginCenterTitle"
          aria-hidden="true"
        >
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-body">

                <form style="margin: 20px">
                    <div class="form-group">
                        <label>Nombre de la categoría</label>
                        <input type="text" class="form-control" v-model="alterCategory.nombre"  placeholder="Ingresá el nombre de la categoría">
                    </div>
                    <div class="form-group">
                        <label>Imagen</label>
                        <input type="text" class="form-control" v-model="alterCategory.imagen"  placeholder="Ingresá el path de la imagen">
                    </div>
                    <div class="form-group">
                        <label>Color</label>
                        <input type="text" class="form-control" v-model="alterCategory.color"  placeholder="Ingresá el color en hexadecimal">
                    </div>
                    <div class="form-group">
                        <label>Link al video de la categoría</label>
                        <input type="text" class="form-control" v-model="alterCategory.link_video"  placeholder="Ingresá el path del video de la categoría">
                    </div>


                    <input type="radio" id="borrador" value="B" v-model="alterCategory.estado">
                    <label for="borrador">Borrador</label>
                    <br>
                    <input type="radio" id="publicado" value="P" v-model="alterCategory.estado">
                    <label for="publicado">Publicado</label>
                    <br>




                </form>
  
                <div style="text-align: center">
                        <button
                        type="button"
                        class="btn btn-secondary"
                        data-dismiss="modal"
                    >Cerrar
                    </button>
                    <button
                        type="button"
                        class="btn btn-primary"
                        @click="modificarCategoria(alterCategory)"
                    >Modificar categoría
                    </button>
                </div>
              </div>
            </div>
          </div>
        </div>



   <!-- Modal Nueva Categoría -->
   <div class="modal fade" id="eliminarCategoria" tabindex="-1" role="dialog" aria-labelledby="eliminarCategoriaCenterTitle"
   aria-hidden="true">
   <div class="modal-dialog modal-dialog-centered" role="document">
     <div class="modal-content">
       <div class="modal-header">
         <h5 class="modal-title" id="eliminarCategoriaCenterTitle">
           Eliminar categoría
         </h5>
         <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
           <span aria-hidden="true">&times;</span>
         </button>
       </div>
       <div class="modal-body">
         Estás seguro que querés eliminar la categoría?
       </div>
       <div class="modal-footer">
         <button type="button" class="btn btn-secondary" data-dismiss="modal">
           Cerrar
         </button>
         <button type="button" class="btn btn-primary" data-dismiss="modal" @click="eliminarCategoria(idCategoria)">
           Eliminar categoría
         </button>
       </div>
     </div>
   </div>
 </div>







</div>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="js/categorias.js" type="text/javascript"></script>
<script src="js/menu.js" type="text/javascript"></script>
<script src="../js/animaciones.js" type="text/javascript"></script>





</body>
</html>